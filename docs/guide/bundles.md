---
outline: deep
---

# 捆绑预设

`shiki` 主入口会通过动态懒加载的方式，将所有支持的主题和语言打包在一起。大多数情况下，这种方式的性能开销可以忽略，因为只有在实际使用某种语法时才会去加载相应的文件。但如果你需要把 Shiki 打进浏览器运行时或 Web Worker，即使这些文件没被加载，它们也会占据构建产物的体积。为此，我们提供了[细粒捆绑预设](#fine-grained-bundle)方式，让你可以按需一个个地引入所需的语言和主题。

::: info
如果你在开发 Web 应用，或者处于性能敏感的环境，建议使用[细粒捆绑预设](#fine-grained-bundle)来减少体积和内存占用。更多优化建议请参见[性能最佳实践](/guide/best-performance)。
:::

## 使用捆绑预设

为了方便，我们也提供了一些预先组合好的打包版本：

### `shiki/bundle/full`

> [包大小](/guide/#包大小)：6.4 MB（压缩后），1.2 MB（gzip），包含异步分块

完整打包版包含所有主题和语言，与主入口 `shiki` 一致。

### `shiki/bundle/web`

> [包大小](/guide/#包大小)：3.8 MB（压缩后），695 KB（gzip），包含异步分块

包含所有主题、常用 Web 语言（HTML、CSS、JS、TS、JSON、Markdown 等）以及部分 Web 框架（Vue、JSX、Svelte 等）。

用法与普通版本一致，`shiki` 的全部功能在该包中都可用：

```ts twoslash
// @twoslash-cache: {"v":1,"hash":"bc09922b156c22ae5db0d1f3a370b9e8a8102a79c22e1cc1c2c7a69ad448c686","data":"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"}
import {
  BundledLanguage,
  BundledTheme,
  codeToHtml,
  createHighlighter
} from 'shiki/bundle/web' // [!code highlight]

const highlighter = await createHighlighter({
  langs: ['html', 'css', 'js'],
  themes: ['github-dark', 'github-light'],
})
````

## 细粒捆绑预设

在默认情况下，导入 `shiki` 会将所有主题和语言作为异步分块打包进去。虽然不使用它们时不会加载，但在某些情况下你可能希望完全控制打包内容，这时可以使用核心模块自己组合。

```ts twoslash
// @twoslash-cache: {"v":1,"hash":"9051f5e52a1857c6139896f66850698de2df03ff92d16d5cffc83a12c34a9923","data":"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"}
// @noErrors
// 直接导入主题和语言模块，只会打包你引入的内容
import nord from '@shikijs/themes/nord'

// `shiki/core` 不包含任何主题、语言或 wasm 二进制
import { createHighlighterCore } from 'shiki/core'
import { createOnigurumaEngine } from 'shiki/engine/oniguruma'

const highlighter = await createHighlighterCore({
  themes: [
    // 需要传入导入的模块，而不是字符串
    nord,
    // 也可以使用动态导入来进行代码分割
    import('@shikijs/themes/material-theme-ocean')
  ],
  langs: [
    import('@shikijs/langs/javascript'),
    // shiki 会尝试使用模块的默认导出
    () => import('@shikijs/langs/css'),
    // 也可以使用自定义语法的 getter
    async () => JSON.parse(await fs.readFile('my-grammar.json', 'utf-8'))
  ],
  // `shiki/wasm` 包含内嵌为 base64 字符串的 wasm 二进制
  engine: createOnigurumaEngine(import('shiki/wasm'))
})

// 也可以在创建后再加载主题和语言
await highlighter.loadTheme(import('@shikijs/themes/vitesse-light'))

const code = highlighter.codeToHtml('const a = 1', {
  lang: 'javascript',
  theme: 'material-theme-ocean'
})
```

::: info 注释
[简写](/guide/install#简写)仅适用于预设打包版本。细粒化打包中，你可以用 [`createSingletonShorthands`](https://github.com/shikijs/shiki/blob/main/packages/core/src/constructors/bundle-factory.ts#L203) 自己创建，或自行实现类似功能。
:::
